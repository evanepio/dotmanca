[tox]
envlist = py311
isolated_build = True

[testenv]
usedevelop = True

[testenv:{test,coverage,coverage-html}]
setenv = 
    DJANGO_SETTINGS_MODULE=config.settings.test
skip_install = true
allowlist_externals = poetry
commands_pre = 
    poetry install
commands:
    test: poetry run pytest
    coverage: poetry run coverage run -m pytest
    coverage-html: poetry run coverage html

[testenv:lint]
skip_install = true
deps =
    flake8
commands =
    flake8

[testenv:{check-format,black}]
skip_install = true
deps =
    black
commands =
    check-format: black . --check --diff
    black: black .

[testenv:{check-imports,isort}]
skip_install = true
deps =
    isort
commands =
    check-imports: isort . --check-only
    isort: isort .