name: "Run a poetry/tox environment"
description: "Builds and runs a poetry/tox environment"
inputs:
   python-version:
     required: true
     description: "The Python version to use"
   tox-env-plus-args:
     required: true
     description: "The tox environment to run, with args"
runs:
  using: "composite"
  steps:
    - name: Install poetry
      run: pipx install poetry==1.1.15
      shell: bash
    - uses: actions/setup-python@v4
      with:
        python-version: ${{ inputs.python-version }}
        cache: 'poetry'
    - name: Install tox 
      run: pipx install tox
      shell: bash
    - name: Run tox task
      run: tox run -e ${{ inputs.tox-env-plus-args }}
      shell: bash